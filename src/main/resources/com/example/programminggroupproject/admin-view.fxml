<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.geometry.Insets?>
<?import javafx.scene.chart.BarChart?>
<?import javafx.scene.chart.CategoryAxis?>
<?import javafx.scene.chart.NumberAxis?>
<?import javafx.scene.chart.PieChart?>
<?import javafx.scene.chart.LineChart?>
<?import javafx.scene.control.Button?>
<?import javafx.scene.control.Label?>
<?import javafx.scene.layout.HBox?>
<?import javafx.scene.layout.VBox?>
<?import javafx.scene.text.Font?>

<VBox spacing="20.0" xmlns="http://javafx.com/javafx/21" xmlns:fx="http://javafx.com/fxml/1" fx:controller="com.example.programminggroupproject.controller.AdminController">
    <padding>
        <Insets bottom="20.0" left="20.0" right="20.0" top="20.0" />
    </padding>

    <Label text="Admin Dashboard &amp; Analytics">
        <font>
            <Font size="24.0" />
        </font>
    </Label>

    <!-- KPI Cards -->
    <HBox spacing="20.0" alignment="CENTER_LEFT">
        <VBox style="-fx-background-color: #e3f2fd; -fx-padding: 15; -fx-background-radius: 5;" HBox.hgrow="ALWAYS">
            <Label text="Total Revenue" style="-fx-font-size: 14px; -fx-text-fill: #1565c0;" />
            <Label fx:id="totalRevenueLabel" text="€0.00" style="-fx-font-size: 24px; -fx-font-weight: bold; -fx-text-fill: #0d47a1;" />
        </VBox>
        <VBox style="-fx-background-color: #e8f5e9; -fx-padding: 15; -fx-background-radius: 5;" HBox.hgrow="ALWAYS">
            <Label text="Total Requests" style="-fx-font-size: 14px; -fx-text-fill: #2e7d32;" />
            <Label fx:id="totalRequestsLabel" text="0" style="-fx-font-size: 24px; -fx-font-weight: bold; -fx-text-fill: #1b5e20;" />
        </VBox>
        <VBox style="-fx-background-color: #fff3e0; -fx-padding: 15; -fx-background-radius: 5;" HBox.hgrow="ALWAYS">
            <Label text="Active Requests" style="-fx-font-size: 14px; -fx-text-fill: #ef6c00;" />
            <Label fx:id="activeRequestsLabel" text="0" style="-fx-font-size: 24px; -fx-font-weight: bold; -fx-text-fill: #e65100;" />
        </VBox>
        <VBox style="-fx-background-color: #f3e5f5; -fx-padding: 15; -fx-background-radius: 5;" HBox.hgrow="ALWAYS">
            <Label text="Avg. Ticket Size" style="-fx-font-size: 14px; -fx-text-fill: #7b1fa2;" />
            <Label fx:id="avgTicketLabel" text="€0.00" style="-fx-font-size: 24px; -fx-font-weight: bold; -fx-text-fill: #4a148c;" />
        </VBox>
    </HBox>

    <HBox spacing="20.0" VBox.vgrow="ALWAYS">
        <VBox spacing="10.0" HBox.hgrow="ALWAYS">
            <Label text="Service Requests Status" style="-fx-font-weight: bold;"/>
            <PieChart fx:id="statusPieChart" />
        </VBox>
        
        <VBox spacing="10.0" HBox.hgrow="ALWAYS">
            <Label text="Revenue by Service Type" style="-fx-font-weight: bold;"/>
            <BarChart fx:id="revenueBarChart">
                <xAxis>
                    <CategoryAxis label="Service Type" />
                </xAxis>
                <yAxis>
                    <NumberAxis label="Revenue (€)" />
                </yAxis>
            </BarChart>
        </VBox>
    </HBox>

    <HBox spacing="20.0" VBox.vgrow="ALWAYS">
        <VBox spacing="10.0" HBox.hgrow="ALWAYS">
            <Label text="Revenue Trends (Last 7 Days)" style="-fx-font-weight: bold;"/>
            <LineChart fx:id="revenueLineChart">
                <xAxis>
                    <CategoryAxis label="Date" />
                </xAxis>
                <yAxis>
                    <NumberAxis label="Revenue (€)" />
                </yAxis>
            </LineChart>
        </VBox>
        
        <VBox spacing="10.0" HBox.hgrow="ALWAYS">
            <Label text="Top Mechanics by Revenue" style="-fx-font-weight: bold;"/>
            <BarChart fx:id="mechanicRevenueChart">
                <xAxis>
                    <CategoryAxis label="Mechanic" />
                </xAxis>
                <yAxis>
                    <NumberAxis label="Revenue (€)" />
                </yAxis>
            </BarChart>
        </VBox>
    </HBox>



    <Button text="Back to Dashboard" onAction="#handleBack" />
</VBox>
